<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Random Picture Generators</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
    }
    canvas {
      border: 1px solid #ccc;
      margin-top: 20px;
    }
    button, input {
      margin: 5px;
      padding: 10px 20px;
      font-size: 1em;
    }
    input {
      width: 300px;
    }
    .info {
      margin-top: 10px;
      font-size: 0.9em;
      color: #555;
    }
    a {
      color: #0077cc;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <h1>ðŸŽ¨ Random Picture Generators</h1>
  <input type="text" id="seedInput" placeholder="Enter seed here" />
  <br>
  <button onclick="generateRandomSeed()">Random Seed</button>
  <button onclick="generatePicture()">Generate Picture</button>
  <br>
  <canvas id="canvas" width="400" height="400"></canvas>
  <br>
  <button onclick="savePicture()">Save as PNG</button>
  <button onclick="goToHub()">Back to Hub</button>

  <div class="info">
    <p id="timeDisplay"></p>
    <p><a href="https://good-player.github.io/sigmaweb/" target="_blank">https://good-player.github.io/sigmaweb/</a> - Random picture generators</p>
  </div>

  <script>
    function generateRandomSeed() {
      const randomSeed = Math.random().toString(36).substring(2, 10);
      document.getElementById("seedInput").value = randomSeed;
    }

    function hashSeed(seed) {
      let hash = 0;
      for (let i = 0; i < seed.length; i++) {
        hash = seed.charCodeAt(i) + ((hash << 5) - hash);
        hash = hash & hash;
      }
      return hash >>> 0;
    }

    function randomFromSeed(seedHash) {
      return () => {
        seedHash ^= seedHash << 13;
        seedHash ^= seedHash >> 17;
        seedHash ^= seedHash << 5;
        return (seedHash >>> 0) / 4294967296;
      };
    }

    function generatePicture() {
      const seed = document.getElementById("seedInput").value.trim();
      if (!seed) return alert("Please enter a seed!");

      const hash = hashSeed(seed);
      const rand = randomFromSeed(hash);
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Background color
      ctx.fillStyle = `hsl(${rand()*360}, 50%, 90%)`;
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Circles
      for (let i = 0; i < 8; i++) {
        ctx.fillStyle = `rgba(${rand()*255}, ${rand()*255}, ${rand()*255}, 0.6)`;
        ctx.beginPath();
        ctx.arc(rand()*400, rand()*400, rand()*40 + 10, 0, Math.PI * 2);
        ctx.fill();
      }

      // Lines
      for (let i = 0; i < 5; i++) {
        ctx.strokeStyle = `rgba(${rand()*255}, ${rand()*255}, ${rand()*255}, 0.7)`;
        ctx.lineWidth = rand()*5 + 1;
        ctx.beginPath();
        ctx.moveTo(rand()*400, rand()*400);
        ctx.lineTo(rand()*400, rand()*400);
        ctx.stroke();
      }

      // Rectangles
      for (let i = 0; i < 6; i++) {
        ctx.fillStyle = `rgba(${rand()*255}, ${rand()*255}, ${rand()*255}, 0.5)`;
        ctx.fillRect(rand()*400, rand()*400, rand()*50 + 10, rand()*50 + 10);
      }

      // Add seed text
      ctx.font = "16px monospace";
      ctx.fillStyle = "#333";
      ctx.fillText(`Seed: ${seed}`, 10, 380);

      // Add time
      const now = new Date().toLocaleString();
      document.getElementById("timeDisplay").innerText = `Generated on: ${now}`;
    }

    function savePicture() {
      const canvas = document.getElementById("canvas");
      const link = document.createElement("a");
      link.download = "seed-picture.png";
      link.href = canvas.toDataURL("image/png");
      link.click();
    }

    function goToHub() {
      window.location.href = "hub.html"; // Update as needed
    }
  </script>
</body>
</html>
